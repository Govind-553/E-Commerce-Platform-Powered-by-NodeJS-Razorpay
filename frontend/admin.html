<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin Dashboard - Cartify</title>
  <link rel="icon" href="img/payment.png" type="image/x-icon">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <link rel="stylesheet" href="css/admin.css" />
</head>
<body>
  <div class="app">
    <div class="shell" role="application" aria-label="Cartify admin shell">

      <!-- SIDEBAR -->
      <aside class="sidebar" aria-label="Admin sidebar">
        <div class="brand">
          <div class="logo">CA</div>
          <h2>Cartify Admin</h2>
        </div>

        <nav class="nav" aria-label="Main navigation">
          <a href="#dashboard" class="active" onclick="switchTab('dashboard')"><i class="fas fa-chart-line fa-fw"></i> Dashboard</a>
          <a href="#products" onclick="switchTab('products')"><i class="fas fa-boxes fa-fw"></i> Products</a>
          <a href="#orders" onclick="switchTab('orders')"><i class="fas fa-shopping-bag fa-fw"></i> Orders</a>
          <a href="/"><i class="fas fa-home fa-fw"></i> Back to Site</a>
        </nav>

        <div class="logout">
          <button id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Logout</button>
        </div>
      </aside>

      <div class="sidebar-overlay" onclick="toggleSidebar()"></div>

      <!-- MAIN -->
      <main class="content" id="mainContent" role="main">
        <div class="topbar">
          <div style="display:flex; gap:12px; align-items:center; min-width:0;">
            <div>
              <h1 id="dashboard">Dashboard Overview</h1>
              <p class="subtitle">Quick snapshot of sales, orders and inventory</p>
            </div>
          </div>

          <!-- Right side: menu button only -->
          <div style="display:flex; gap:12px; align-items:center;">
            <button class="menu-btn" aria-label="Toggle menu" onclick="toggleSidebar()"><i class="fas fa-bars"></i></button>
          </div>
        </div>

        <!-- stats -->
        <section class="stats-grid" aria-label="summary stats">
          <div class="stat-card">
            <div class="stat-info">
              <h3>Total Sales</h3>
              <p class="sales-value">Loading...</p>
            </div>
            <div class="stat-icon"><i class="fas fa-dollar-sign"></i></div>
          </div>

          <div class="stat-card">
            <div class="stat-info">
              <h3>Total Orders</h3>
              <p class="orders-value">Loading...</p>
            </div>
            <div class="stat-icon"><i class="fas fa-shopping-cart"></i></div>
          </div>

          <div class="stat-card">
            <div class="stat-info">
              <h3>Active Users</h3>
              <p class="users-value">Loading...</p>
            </div>
            <div class="stat-icon"><i class="fas fa-user-friends"></i></div>
          </div>
        </section>

        <!-- Sales chart -->
        <div class="card">
          <h2>Sales Overview</h2>
          <div style="height:320px;">
            <canvas id="salesChart"></canvas>
          </div>
        </div>

        <!-- Product management -->
        <div class="card" id="products">
          <div class="section-header">
            <h2>Product Management</h2>
          </div>

          <form id="productForm" aria-label="Product form">
            <input type="hidden" id="productId">
            <div class="form-grid">
              <input type="text" id="name" placeholder="Product Name" required>
              <input type="number" id="price" placeholder="Price" required>
              <input type="text" id="image" placeholder="Image URL" required>
              <select id="category" required>
                <option value="">Select Category</option>
                <option value="Topwear">Topwear</option>
                <option value="Bottomwear">Bottomwear</option>
                <option value="Jacket">Jacket</option>
                <option value="Wedding-Wear">Wedding-Wear</option>
                <option value="Accessories">Accessories</option>
              </select>
              <input type="number" id="stock" placeholder="Stock Quantity" required>
              <textarea id="description" placeholder="Product Description" required rows="3"></textarea>
            </div>

            <div style="display:flex; gap:10px; margin-top:10px; flex-wrap:wrap;">
              <button type="submit" class="btn btn-primary" id="saveBtn">Add Product</button>
              <button type="button" id="cancelBtn" class="btn" style="background:#eef2ff; color:var(--accent); display:none">Cancel</button>
            </div>
          </form>
        </div>

        <!-- Inventory -->
        <div class="card">
          <h2>Inventory</h2>
          <div class="table-responsive" aria-live="polite">
            <table aria-label="Inventory table">
              <thead>
                <tr>
                  <th width="80">Image</th>
                  <th>Name</th>
                  <th>Price</th>
                  <th>Stock</th>
                  <th>Category</th>
                  <th width="120">Actions</th>
                </tr>
              </thead>
              <tbody id="productTableBody">
                <tr class="inventory-row"><td colspan="6" style="text-align:center; padding:20px;">Loading...</td></tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Recent Orders -->
        <div class="card" id="orders">
          <h2>Recent Orders</h2>
          <div class="table-responsive">
            <table aria-label="Recent orders table">
              <thead>
                <tr>
                  <th>Order ID</th>
                  <th>User</th>
                  <th>Amount</th>
                  <th>Status</th>
                  <th>Date</th>
                </tr>
              </thead>
              <tbody id="paymentTableBody">
                <tr class="order-row"><td colspan="5" style="text-align:center; padding:20px;">Loading orders...</td></tr>
              </tbody>
            </table>
          </div>
        </div>

      </main>
    </div>
  </div>

  <!-- Firebase & Toast (unchanged) -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
  <script src="js/firebaseConfig.js"></script>
  <script src="js/toast.js"></script>
  <script src="js/config.js"></script> 

  <script src="js/admin.js"></script>
</body>
</html>
