<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Razorpay Web-Integration</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/img/payment.png" type="image/x-icon">
    <style>
body {
    font-family: 'Arial', sans-serif;
    background-color: #f9f9f9;
    margin: 0;
    padding: 0;
    overflow-x: hidden;
}

.container {
    width: 1200px;
    margin: 100px auto 80px;
    max-width: 90%;
    transition: transform 1s;
    border-radius: 8px;
}

/* ===== NAVBAR / HEADER ===== */

.topbar {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    background-color: #ffffff;
    z-index: 100;
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
}

.nav-inner {
    max-width: 1200px;
    margin: 0 auto;
    padding: 10px 16px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    box-sizing: border-box;
}

.brand {
    display: flex;
    align-items: center;
    gap: 10px;
    white-space: nowrap;
}

.brand img {
    height: 32px;
    width: 32px;
    border-radius: 8px;
    object-fit: cover;
}

.brand span {
    font-size: 1.4rem;
    font-weight: 700;
    letter-spacing: 0.05em;
}

.iconCart {
    position: relative;
    display: flex;
    align-items: center;
    cursor: pointer;
}

.iconCart img {
    width: 30px;
    height: 30px;
    object-fit: contain;
}

.totalQuantity {
    position: absolute;
    top: -6px;
    right: -8px;
    font-size: 11px;
    background-color: #e11d48;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    color: #fff;
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Mobile navbar */
@media (max-width: 600px) {
    .nav-inner {
        padding: 8px 12px;
    }
    .brand img {
        height: 28px;
        width: 28px;
    }
    .brand span {
        font-size: 1.1rem;
    }
    .iconCart img {
        width: 26px;
        height: 26px;
    }
    .totalQuantity {
        width: 18px;
        height: 18px;
        font-size: 10px;
        top: -5px;
        right: -6px;
    }
}

/* ===== PRODUCT GRID ===== */

.listProduct {
    margin-top: 40px;
    margin-left: 0;
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 25px;
}
.listProduct .item img {
    width: 300px;
    height: 300px;
    object-fit: cover;
}

img:hover {
    transform: scale(1.1);
}
img {
    margin-bottom: 15px;
    transition: transform 0.3s ease;
}

.listProduct .item h4,
.listProduct .item h2 {
    font-size: 22px;
    font-weight: bold;
    margin: 8px auto;
}
.listProduct .item .price{
    font-size: 16px;
    font-weight: bold;
    margin: 8px auto;
}
.listProduct .item {
    position: relative;
}
.listProduct .item button{
    position: absolute;
    top: 50%;
    left: 50%;
    background-color: #b31010;
    color: #fff;
    font-weight: bold;
    width: 40%;
    border: none;
    border-radius: 5px;
    padding: 20px 30px;
    box-shadow: 0 10px 50px #000;
    cursor: pointer;
    transform: translateX(-50%) translateY(25px);
    opacity: 0;
}

.listProduct .item:hover button{
    transition: 0.5s;
    opacity: 1;
    transform: translateX(-50%);
}

/* ===== CART SIDEBAR ===== */

.cart {
    color: #fff;
    position: fixed;
    top: 0;
    right: -100%;
    width: 400px;
    height: 100vh;
    background-color: #0e0f11;
    display: grid;
    grid-template-rows: 50px 1fr 50px;
    gap: 20px;
    transition: right 1s;
    z-index: 20;
}
.cart h2 {
    color: #e8bc0e;
    padding: 20px;
    margin: 0;
}
.cart .listCart .item {
    display: grid;
    grid-template-columns: 50px 1fr 50px;
    align-items: center;
    gap: 20px;
    margin-bottom: 20px;
}
.cart .listCart img {
    width: 100%;
    height: 70px;
    object-fit: contain;
    border-radius: 10px;
}
.cart .listCart .item .name {
    font-weight: bold;
}
.cart .listCart .item .quantity {
    display: flex;
    justify-content: end;
    align-items: center;
}
.cart .listCart .item .quantity .value{
    margin: 5px;
}
.cart .listCart .item span{
    display: block;
    width: 50px;
    text-align: center;
}
.cart .listCart {
    padding: 20px;
    overflow: auto;
}
.cart .listCart::-webkit-scrollbar{
    width: 0;
}
.cart .buttons {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    text-align: center;
}
.cart .buttons div {
    background-color: #000;
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: bold;
    cursor: pointer;
}
.cart .buttons a {
    color: #fff;
    text-decoration: none;
}
.cart .buttons .checkout{
    background-color: #e8bc0e;
}

/* ===== SEARCH / FILTERS ===== */

#search-container {
    margin: 1em 0 2em;
}
#search-container input {
    background-color: transparent;
    width: 40%;
    border: none;
    border-bottom: 2px solid #110f29;
    padding: 1em 0.5em;
}
#search-container input:focus{
    outline: none;
    border-bottom-color: #6759ff;
}
#search-container button {
    padding: 1em 3.5em;
    margin-left: 1em;
    background-color: #6759ff;
    color: #fff;
    border: 0;
    border-radius: 5px;
    margin-top: 0.5em;
    cursor: pointer;
}
#buttons {
    margin-bottom: 1.5em;
}
.button-value {
    border: 2px solid #6759ff;
    padding: 1em 2.2em;
    border-radius: 3em;
    background-color: transparent;
    color: #6759ff;
    cursor: pointer;
}
.active {
    background-color: #6759ff;
    color: #fff;
}

/* ===== FOOTER (3-COLUMN) ===== */

.site-footer {
    background: radial-gradient(circle at top left, #111827, #020617);
    color: #e5e7eb;
    width: 100%;
    box-shadow: 0 -2px 10px rgba(0,0,0,0.3);
    box-sizing: border-box;
    padding: 24px 12px 14px;
    margin-top: 40px;
}

.footer-inner {
    max-width: 1200px;
    margin: 0 auto;
}

.footer-columns {
    display: flex;
    justify-content: space-between;
    gap: 24px;
    flex-wrap: wrap;
}

.footer-col {
    flex: 1 1 220px;
    min-width: 0;
}

.footer-col h4 {
    margin: 0 0 10px;
    font-size: 0.95rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: #f9fafb;
}

.footer-col p,
.footer-col a,
.footer-col li {
    font-size: 0.85rem;
    color: #d1d5db;
    margin: 4px 0;
    line-height: 1.5;
}

.footer-col ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

.footer-col a {
    text-decoration: none;
}

.footer-col a:hover {
    color: #ffffff;
    text-decoration: underline;
}

.footer-bottom {
    text-align: center;
    font-size: 0.8rem;
    color: #9ca3af;
    margin-top: 16px;
    border-top: 1px solid rgba(55,65,81,0.7);
    padding-top: 10px;
}

@media (max-width: 768px) {
    .footer-columns {
        flex-direction: column;
    }
}

/* Tablets and smaller desktops */
@media (max-width: 1024px) {
    .container {
        margin: 90px auto 80px;
        max-width: 100%;
    }
    .listProduct {
        margin-top: 30px;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 16px;
        justify-items: center;
    }
    .listProduct .item img {
        width: 100%;
        max-width: 220px;
        height: auto;
    }
    #search-container input {
        width: 100%;
    }
    #search-container button {
        width: 100%;
        margin-left: 0;
        margin-top: 10px;
    }
    #buttons {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
    }
    .button-value {
        flex: 1 1 calc(50% - 10px);
        text-align: center;
    }
    .cart {
        width: 80%;
    }
}

/* Mobile phones */
@media (max-width: 600px) {
    .listProduct {
        grid-template-columns: 1fr;
    }
    .cart {
        width: 100%;
    }
    .cart .buttons {
        grid-template-columns: 1fr;
    }
}
    </style>
</head>
<body>
<header class="topbar">
  <div class="nav-inner">
    <div class="brand">
      <img src="/img/logo.png" alt="Cartify logo">
      <span>CARTIFY</span>
    </div>

    <div class="iconCart">
      <img src="/img/shopping-cart.png" alt="cart-icon">
      <div class="totalQuantity">0</div>
    </div>
  </div>
</header>

<div class="container">
    <div id="search-container">
       <input type="search" id="search-input" placeholder="Search product names here...">
       <button type="submit" id="search-button">Search</button>
    </div>
    <div id="buttons">
        <button class="button-value">All</button>
        <button class="button-value">Topwear</button>    
        <button class="button-value">Bottomwear</button>    
        <button class="button-value">Jacket</button>    
        <button class="button-value">Wedding-Wear</button>    
        <button class="button-value">Accessories</button>
    </div>
    <div class="listProduct">
        <div class="item">
            <img src="/img/T-shirt.png">
            <h4>T-shirt</h4>
            <div class="price">Amount:- Rs. 300</div>
            <button>Add to cart</button>
        </div>

        <div class="item">
            <img src="/img/Shoes.png">
            <h4>Shoes</h4>
            <div class="price">Amount:- Rs. 900</div>
            <button>Add to cart</button>
        </div>

        <div class="item">
            <img src="/img/Jeans.png">
            <h4>Jeans</h4>
            <div class="price">Amount:- Rs. 800</div>
            <button>Add to cart</button>
        </div>

        <div class="item">
            <img src="/img/Shirt.png">
            <h4>Shirt</h4>
            <div class="price">Amount:- Rs. 500</div>
            <button>Add to cart</button>
        </div>

        <div class="item">
            <img src="/img/Blazer.png">
            <h4>Men's Blazer</h4>
            <div class="price">Amount:- Rs. 1500</div>
            <button>Add to cart</button>
        </div>

        <div class="item">
            <img src="/img/kurta-dress.png">
            <h4>Kurta Dress</h4>
            <div class="price">Amount:- Rs. 1200</div>
            <button>Add to cart</button>
        </div>
    </div>
</div>

<div class="cart">
    <h2>Cart</h2>
    <div class="listCart">
        <div class="item">
            <img src="/img/T-shirt.png">
            <div class="content">
                <div class="name">
                    Product Name
                </div>
                <div class="price">
                    Rs. 500/1 product
                </div>
            </div>
            <div class="quantity">
                <button>-</button>
                <span class="value">3</span>
                <button>+</button>
            </div>
        </div>
    </div>
    <div class="buttons">
        <div class="close">CLOSE</div>
        <div class="checkout">
            <a href="/checkout.html">CHECKOUT</a>
        </div>
    </div>
</div>

<footer class="site-footer">
  <div class="footer-inner">
    <div class="footer-columns">
      <div class="footer-col">
        <h4>ABOUT CARTIFY</h4>
        <p>Your one-stop store for everyday fashion &amp; lifestyle essentials with secure payments.</p>
      </div>

      <div class="footer-col">
        <h4>QUICK LINKS</h4>
        <ul>
          <li><a href="/">Home</a></li>
          <li><a href="/checkout.html">Checkout</a></li>
          <li><a href="/order.html">Orders</a></li>
        </ul>
      </div>

      <div class="footer-col">
        <h4>CONTACT</h4>
        <p>Email: support@cartify.com</p>
        <p>Phone: +91-98765 43210</p>
      </div>
    </div>

    <div class="footer-bottom">
      &copy; 2025 CARTIFY. All rights reserved.
    </div>
  </div>
</footer>

<script>
let iconCart = document.querySelector('.iconCart');
let cart = document.querySelector('.cart');
let container = document.querySelector('.container');
let close = document.querySelector('.close');

cart.style.right = '-100%';

iconCart.addEventListener('click', () => {
    const isHidden = cart.style.right === '-100%';
    if (isHidden) {
        cart.style.right = '0%';
        if (window.innerWidth > 768) {
            container.style.transform = 'translateX(-400px)';
        } else {
            container.style.transform = 'translateX(0px)';
        }
    } else {
        cart.style.right = '-100%';
        container.style.transform = 'translateX(0px)';
    }
});

close.addEventListener('click', () => {
    cart.style.right = '-100%';
    container.style.transform = 'translateX(0px)';
});

let products = null;

fetch('/product.json')
    .then(response => response.json())
    .then(data => {
        products = data;
        addDataToHTML();
});

function addDataToHTML() {
    let listProductHTML = document.querySelector('.listProduct');
    listProductHTML.innerHTML = '';

    if (products != null) {
        products.forEach(product => {
            let newProduct = document.createElement('div');
            newProduct.classList.add('item');
            newProduct.innerHTML = 
            `<img src="${product.image}" alt="">
            <h2>${product.name}</h2>
            <div class="price">Amount:- Rs.${product.price}</div>
            <button onclick="addCart(${product.id})">Add To Cart</button>`;

            listProductHTML.appendChild(newProduct);
        });
    }
}

let listCart = {};
function checkCart() {
    var cookieValue = document.cookie
        .split('; ')
        .find(row => row.startsWith('listCart='));
    if (cookieValue) {
        try {
            listCart = JSON.parse(cookieValue.split('=')[1]);
            if (typeof listCart !== 'object' || listCart === null) {
                listCart = {};
            }
        } catch (e) {
            console.error("Error parsing listCart from cookie:", e);
            listCart = {};
        }
    } else {
        listCart = {};
    }
}
checkCart();

function addCart(idProduct) {
    let productsCopy = JSON.parse(JSON.stringify(products));
    if (!listCart[idProduct]) {
        listCart[idProduct] = productsCopy.find(product => product.id == idProduct);
        listCart[idProduct].quantity = 1;
    } else {
        listCart[idProduct].quantity++;
    }
    document.cookie = "listCart=" + JSON.stringify(listCart) + "; expires=Thu, 31 Dec 2025 23:59:59 UTC; path=/;";

    addCartToHTML();
}

function addCartToHTML() {
    let listCartHTML = document.querySelector('.listCart');
    listCartHTML.innerHTML = '';

    let totalHTML = document.querySelector('.totalQuantity');
    let totalQuantity = 0;
    for (let id in listCart) {
        if (listCart[id]) {
            let product = listCart[id];
            let newCart = document.createElement('div');
            newCart.classList.add('item');
            newCart.innerHTML = 
                `<img src="${product.image}">
                <div class="content">
                    <div class="name">${product.name}</div>
                    <div class="price">Amount:- Rs.${product.price} / ${product.quantity} product(s)</div>
                </div>
                <div class="quantity">
                    <button onclick="changeQuantity(${product.id}, '-')">-</button>
                    <span class="value">${product.quantity}</span>
                    <button onclick="changeQuantity(${product.id}, '+')">+</button>
                </div>`;
            listCartHTML.appendChild(newCart);
            totalQuantity += product.quantity;
        }
    }
    totalHTML.innerText = totalQuantity;
}

function changeQuantity($idProduct, $type){
    switch ($type) {
        case '+':
            listCart[$idProduct].quantity++;
            break;
        case '-':
            listCart[$idProduct].quantity--;
            if(listCart[$idProduct].quantity <= 0){
                delete listCart[$idProduct];
            }
            break;
        default:
            break;
    }
    document.cookie = "listCart=" + JSON.stringify(listCart) + "; expires=Thu, 31 Dec 2025 23:59:59 UTC; path=/;";
    addCartToHTML();
}

document.addEventListener('DOMContentLoaded', () => {
    let searchInput = document.getElementById('search-input');
    let searchButton = document.getElementById('search-button');
    let filterButtons = document.querySelectorAll('.button-value');

    filterButtons.forEach(button => {
        button.addEventListener('click', () => {
            filterButtons.forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');
            let category = button.textContent.toLowerCase();
            filterProducts(category);
        });
    });

    function filterProducts(category) {
        if (!Array.isArray(products)) return;

        let filteredProducts;
        if (category === 'all') {
            filteredProducts = products;
        } else {
            filteredProducts = products.filter(product => product.category.toLowerCase() === category);
        }
        updateProductDisplay(filteredProducts);
    }

    searchButton.addEventListener('click', () => {
        if (!Array.isArray(products)) return;

        let searchValue = searchInput.value.toLowerCase();
        if (searchValue) {
            let searchResults = products.filter(product =>
                product.name.toLowerCase().startsWith(searchValue)
            );
            updateProductDisplay(searchResults);
        } else {
            updateProductDisplay(products); 
        }
    });

    function updateProductDisplay(productList) {
        let listProductHTML = document.querySelector('.listProduct');
        listProductHTML.innerHTML = ''; 

        productList.forEach(product => {
            let newProduct = document.createElement('div');
            newProduct.classList.add('item');
            newProduct.innerHTML = `
                <img src="${product.image}" alt="">
                <h2>${product.name}</h2>
                <div class="price">Amount:- Rs.${product.price}</div>
                <button onclick="addCart(${product.id})">Add To Cart</button>
            `;
            listProductHTML.appendChild(newProduct);
        });
    }

    if (Array.isArray(products) && products.length) {
        updateProductDisplay(products);
    }
});

window.addEventListener('load', () => {
    addCartToHTML();
});
</script>
</body>
</html>
